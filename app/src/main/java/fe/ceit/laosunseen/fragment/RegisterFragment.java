package fe.ceit.laosunseen.fragment;import android.content.Intent;import android.graphics.Bitmap;import android.graphics.BitmapFactory;import android.net.Uri;import android.os.Bundle;import android.support.annotation.NonNull;import android.support.annotation.Nullable;import android.support.v4.app.Fragment;import android.support.v7.widget.Toolbar;import android.view.LayoutInflater;import android.view.Menu;import android.view.MenuInflater;import android.view.MenuItem;import android.view.View;import android.view.ViewGroup;import android.widget.ImageView;import android.widget.Toast;import fe.ceit.laosunseen.MainActivity;import fe.ceit.laosunseen.R;public class RegisterFragment extends Fragment{//    Explicit    private Uri uri;    private  ImageView imageView;    @Override    public void onActivityCreated(@Nullable Bundle savedInstanceState) {        super.onActivityCreated(savedInstanceState);//        Create Toolbar        createToolbar();//        Photo controller        photoController();    } // Main method    @Override    public void onCreateOptionsMenu(Menu menu, MenuInflater inflater) {        super.onCreateOptionsMenu(menu, inflater);        inflater.inflate(R.menu.menu_register, menu);    }    @Override    public boolean onOptionsItemSelected(MenuItem item) {        if (item.getItemId() == R.id.itemUpload) {            return true;        }        return super.onOptionsItemSelected(item);    }    @Override    public void onActivityResult(int requestCode, int resultCode, Intent data) {        super.onActivityResult(requestCode, resultCode, data);        if (resultCode == getActivity().RESULT_OK) { // could be select photo properly or not            uri = data.getData();            //Toast.makeText(getActivity(), "Result OK!", Toast.LENGTH_SHORT).show();            try {                // Big full image                Bitmap bitmap = BitmapFactory.decodeStream(getActivity().getContentResolver().openInputStream(uri));                //small image 400 x 300                Bitmap bitmap1 = Bitmap.createScaledBitmap(bitmap, 400, 300, true);                imageView.setImageBitmap(bitmap1);            } catch (Exception e) {                e.printStackTrace();                //Toast.makeText(getActivity(), "err "+ e.toString(), Toast.LENGTH_SHORT).show();            }        } else { // if could not select photo show Toast message            Toast.makeText(getActivity(), "Please Choose Photo", Toast.LENGTH_SHORT).show();        }    }    private void photoController() {        imageView = getView().findViewById(R.id.imvPhoto);        imageView.setOnClickListener(new View.OnClickListener(){            @Override            public void onClick(View view) {                Intent intent = new Intent(Intent.ACTION_PICK);                intent.setType("image/*"); // open any program that could be open the files                startActivityForResult(Intent.createChooser(intent, "Please Choose App"), 1); // select photo show on position 1            }        });    }    private void createToolbar() {        Toolbar toolbar = getActivity().findViewById(R.id.toolbarRegister);        ((MainActivity)getActivity()).setSupportActionBar(toolbar);        ((MainActivity)getActivity()).getSupportActionBar().setTitle("Register");        ((MainActivity)getActivity()).getSupportActionBar().setSubtitle("Please Choose photo and fill form");        ((MainActivity) getActivity()).getSupportActionBar().setHomeButtonEnabled(true);        ((MainActivity) getActivity()).getSupportActionBar().setDisplayHomeAsUpEnabled(true);        toolbar.setNavigationOnClickListener(new View.OnClickListener(){            @Override            public void onClick(View view) {                getActivity().getSupportFragmentManager().popBackStack(); // press back button on navigator            }        });        setHasOptionsMenu(true);    }    @Nullable    @Override    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {        View view = inflater.inflate(R.layout.fragment_register, container, false); // refer to xml        return view;    }}